!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("IngestSDK",[],t):"object"==typeof exports?exports.IngestSDK=t():e.IngestSDK=t()}(this,function(){return function(e){function t(r){if(s[r])return s[r].exports;var o=s[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var s={};return t.m=e,t.c=s,t.d=function(e,s,r){t.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(s,"a",s),s},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,s){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)},n=function(e){if(!e||"[object Object]"!==o.call(e))return!1;var t=r.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!s)return!1;var i;for(i in e);return void 0===i||r.call(e,i)};e.exports=function e(){var t,s,r,o,u,a,c=arguments[0],p=1,h=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[1]||{},p=2),(null==c||"object"!=typeof c&&"function"!=typeof c)&&(c={});p<h;++p)if(null!=(t=arguments[p]))for(s in t)r=c[s],o=t[s],c!==o&&(d&&o&&(n(o)||(u=i(o)))?(u?(u=!1,a=r&&i(r)?r:[]):a=r&&n(r)?r:{},c[s]=e(d,a,o)):void 0!==o&&(c[s]=o));return c}},function(e,t,s){"use strict";function r(e){this.defaults={async:!0,method:"GET",ignoreAcceptHeader:!1,requestProgress:null},this.request=new XMLHttpRequest,this.options=i(!0,this.defaults,e),this.setupListeners(),this.maxRetrys=3,this.retrys=0}var o=s(5),i=s(0),n=s(7),u=s(8),a=[200,201,202,204];r.prototype.send=function(){return this.promise=o(),this.options.url?this.makeRequest():this.requestError("Request Error : a url is required to make the request."),this.promise.then(u._sendNextRequest)},r.prototype.sendSync=function(e){if("function"==typeof e&&(this.callback=e),this.options.url)return this.makeRequest();this.requestError("Request Error : a url is required to make the request.")},r.prototype.setupListeners=function(){this.request.onreadystatechange=this.readyStateChange.bind(this),"function"==typeof this.options.requestProgress&&(this.request.upload.onprogress=this.progressEvent.bind(this))},r.prototype.makeRequest=function(){var e=this.preparePostData(this.options.data),t=this.options.headers,s=t&&t.hasOwnProperty("Content-Type");if(!e.success)return void this.requestError("Request Error : error preparing post data.");if(this.request.open(this.options.method,this.options.url,this.options.async),this.options.ignoreAcceptHeader||this.request.setRequestHeader("Accept","application/vnd.ingest.v1+json"),t&&this.applyRequestHeaders(t),this.options.token){if(n.isExpired(this.options.token))return void this.requestError("Request Error : token is expired.");this.request.setRequestHeader("Authorization",this.options.token)}e.data&&"JSON"===e.type&&!s&&this.request.setRequestHeader("Content-Type","application/vnd.ingest.v1+json"),this.options.async?u.addRequest([this.request,e.data]):(e.data?this.request.send(e.data):this.request.send(),this.isValidResponseCode(this.request.status)||this.requestError("Request Error : invalid response code : "+this.request.status))},r.prototype.preparePostData=function(e){var t={success:!0,data:e,type:"JSON"};if(e instanceof FormData)return t.type="FormData",t;if(e instanceof Blob)return t.type="File",t;if(e)try{t.data=JSON.stringify(e)}catch(e){t.success=!1,t.data=null}return t},r.prototype.applyRequestHeaders=function(e){var t,s,r=Object.keys(e),o=r.length;for(s=0;s<o;s++)t=r[s],this.request.setRequestHeader(t,e[t])},r.prototype.requestComplete=function(e){if(this.response=this.processResponse(e),!this.promise)return void("function"==typeof this.callback&&this.callback(null,this.response));this.promise(!this.response.data.errors,[this.response])},r.prototype.processResponse=function(e){var t=this.request.getResponseHeader("Content-Type"),s=e;if(202!==this.request.status&&204!==this.request.status&&t&&-1!==t.indexOf("json"))try{s=JSON.parse(e)}catch(e){s={errors:"JSON parsing failed. "+e.stack}}return{data:s,headers:this.request.getResponseHeader.bind(this.request),statusCode:this.request.status}},r.prototype.requestError=function(e){var t;if(!this.promise){if(t=new Error(e),"function"==typeof this.callback)return void this.callback(t);throw t}this.promise(!1,[{message:e,headers:this.request.getAllResponseHeaders(),statusCode:this.request.status}])},r.prototype.progressEvent=function(e){e.lengthComputable&&this.options.requestProgress(e.loaded,e.total)},r.prototype.readyStateChange=function(){var e,t;switch(t=1e3,this.request.readyState){case 4:if(429===this.request.status&&this.retrys<this.maxRetrys)return this.request.getResponseHeader("Retry-After")&&(t=1e3*this.request.getResponseHeader("Retry-After")),this.retrys++,void setTimeout(this.makeRequest.bind(this),t);if(this.isValidResponseCode(this.request.status))return this.requestComplete(this.request.responseText);if("0"===this.request.getResponseHeader("Content-Length"))return this.requestError("Request Error: Invalid response code : "+this.request.status);e=this.processResponse(this.request.response),this.requestError(e.data)}},r.prototype.isValidResponseCode=function(e){var t,s=!1,r=a.length;for(t=0;t<r;t++)if(e===a[t]){s=!0;break}return s},r.prototype.cancel=function(){this.request.onreadystatechange=null,this.request.abort(),this.requestError("Request has been canceled.")},e.exports=r},function(e,t,s){"use strict";var r=s(5),o={};o.parseTokens=function(e,t){var s,r,o;if(!e)return null;for(s=Object.keys(t),o=s.length,r=0;r<o;r++)e=e.replace("<%="+s[r]+"%>",t[s[r]]);return e},o.promisify=function(e,t){var s=r();return s(e,[t]),s},o.series=function(e,t){var s=e.length,i=r(),n={total:s,complete:0,responses:[],promises:e,paused:!0};return i.pause=o._seriesPause.bind(void 0,i,n),i.resume=o._seriesResume.bind(void 0,i,n),i.cancel=o._seriesCancel.bind(void 0,i,n),t||(n.paused=!1,o._seriesCallPromise(e[0],n,i)),i},o._seriesCallPromise=function(e,t,s){t.paused||e().then(o._seriesComplete.bind(void 0,s,t),o._seriesError.bind(void 0,s,t))},o._seriesComplete=function(e,t,s){t.canceled||(t.complete++,t.responses.push(s),t.complete>=t.total?e(!0,t.responses):t.paused||o._seriesCallPromise(t.promises[t.complete],t,e))},o._seriesError=function(e,t,s){e(!1,[s])},o._seriesPause=function(e,t){t.paused=!0},o._seriesResume=function(e,t){t.paused=!1,t.complete!==t.total&&o._seriesCallPromise(t.promises[t.complete],t,e)},o._seriesCancel=function(e,t){t.canceled=!0,e(!0,[])},o.isImage=function(e){return-1!==e.type.indexOf("image")},e.exports=o},function(e,t,s){"use strict";function r(e){this.defaults={host:"https://api.ingest.io",all:"/<%=resource%>",byId:"/<%=resource%>/<%=id%>",trash:"/<%=resource%>?status=trashed",deleteMethods:{permanent:"?permanent=1"},search:"/<%=resource%>?search=<%=input%>",tokenSource:null,resource:null},this.config=o(!0,{},this.defaults,e)}var o=s(0),i=s(1),n=s(2);r.prototype._tokenSource=function(){var e=null;return this.config.tokenSource&&(e=this.config.tokenSource.call()),e},r.prototype.getAll=function(e){var t,s=n.parseTokens(this.config.host+this.config.all,{resource:this.config.resource});return t=new i({url:s,token:this._tokenSource(),headers:e}),t.send()},r.prototype.getById=function(e){var t,s;return"string"!=typeof e||e.length<=0?n.promisify(!1,"IngestSDK Resource getById requires a valid id passed as a string."):(t=n.parseTokens(this.config.host+this.config.byId,{resource:this.config.resource,id:e}),s=new i({url:t,token:this._tokenSource()}),s.send())},r.prototype.getTrashed=function(e){var t,s=n.parseTokens(this.config.host+this.config.trash,{resource:this.config.resource});return t=new i({url:s,token:this._tokenSource(),headers:e}),t.send()},r.prototype.add=function(e){var t,s;return"object"!=typeof e?n.promisify(!1,"IngestSDK Resource add requires a resource passed as an object."):(t=n.parseTokens(this.config.host+this.config.all,{resource:this.config.resource}),s=new i({url:t,token:this._tokenSource(),method:"POST",data:e}),s.send())},r.prototype.update=function(e){var t,s,r;return"object"!=typeof e?n.promisify(!1,"IngestSDK Resource update requires a resource to be passed as an object."):(s=e,r=n.parseTokens(this.config.host+this.config.byId,{resource:this.config.resource,id:e.id}),t=new i({url:r,token:this._tokenSource(),method:"PATCH",data:s}),t.send())},r.prototype.delete=function(e,t){return"boolean"!=typeof t&&(t=!0),"string"!=typeof e?n.promisify(!1,"IngestSDK Resource delete requires a resource to be passed as a string."):this._deleteResource(e,!1,t)},r.prototype.permanentDelete=function(e,t){return"boolean"!=typeof t&&(t=!0),"string"!=typeof e?n.promisify(!1,"IngestSDK Resource delete requires a resource to be passed as a string."):this._deleteResource(e,!0,t)},r.prototype._deleteResource=function(e,t){var s,r=n.parseTokens(this.config.host+this.config.byId,{resource:this.config.resource,id:e});return!0===t&&(r+=this.config.deleteMethods.permanent),s=new i({url:r,token:this._tokenSource(),method:"DELETE"}),s.send()},r.prototype.deleteSync=function(e,t){if("string"!=typeof e)return void t(new Error("IngestSDK Resource delete requires a resource to be passed as a string."));this._deleteResourceSync(e,!1,t)},r.prototype.permanentDeleteSync=function(e,t){if("string"!=typeof e)return void t(new Error("IngestSDK Resource delete requires a resource to be passed as a string."));this._deleteResourceSync(e,!0,t)},r.prototype._deleteResourceSync=function(e,t,s){var r,o=n.parseTokens(this.config.host+this.config.byId,{resource:this.config.resource,id:e});!0===t&&(o+=this.config.deleteMethods.permanent),r=new i({url:o,async:!1,token:this._tokenSource(),method:"DELETE"}),r.sendSync(s)},r.prototype.search=function(e,t,s){var r,o;if("string"!=typeof e)return n.promisify(!1,"IngestSDK Resource search requires search input to be passed as a string.");if(r=n.parseTokens(this.config.host+this.config.search,{resource:this.config.resource,input:encodeURIComponent(e)}),s){if("string"!=typeof s)return n.promisify(!1,"IngestSDK Resource search requires a valid status to be passed as a string.");r=r+"&status="+s}return o=new i({url:r,token:this._tokenSource(),headers:t}),o.send()},r.prototype.searchTrash=function(e,t){return this.search(e,t,"trashed")},r.prototype.count=function(){var e,t=n.parseTokens(this.config.host+this.config.all,{resource:this.config.resource});return e=new i({url:t,token:this._tokenSource(),method:"HEAD"}),e.send().then(this._handleCountResponse)},r.prototype.trashCount=function(){var e,t=n.parseTokens(this.config.host+this.config.trash,{resource:this.config.resource});return e=new i({url:t,token:this._tokenSource(),method:"HEAD"}),e.send().then(this._handleCountResponse)},r.prototype._handleCountResponse=function(e){return parseInt(e.headers("Resource-Count"),10)},e.exports=r},function(e,t,s){"use strict";e.exports={EVENTS:"events",INPUTS:"encoding/inputs",JOBS:"encoding/jobs",NETWORKS:"networks",PROFILES:"encoding/profiles",ROLES:"roles",USERS:"users",VIDEOS:"videos",LIVESTREAMS:"live"}},function(e,t,s){(function(s,r){var o,i,n;!function(s,r){i=[],o=r,void 0!==(n="function"==typeof o?o.apply(t,i):o)&&(e.exports=n)}(0,function(){function e(e){return"function"==typeof e}function t(e){return"object"==typeof e}function o(e){void 0!==s?s(e):void 0!==r&&r.nextTick?r.nextTick(e):setTimeout(e,0)}var i;return function s(r){var n,u=[],a=[],c=function(e,t){return null==n&&null!=e&&(n=e,u=t,a.length&&o(function(){for(var e=0;e<a.length;e++)a[e]()})),n};return c.then=function(c,p){var h=s(r),d=function(){function s(r){var o,n=0;try{if(r&&(t(r)||e(r))&&e(o=r.then)){if(r===h)throw new TypeError;o.call(r,function(){n++||s.apply(i,arguments)},function(e){n++||h(!1,[e])})}else h(!0,arguments)}catch(e){n++||h(!1,[e])}}try{var r=n?c:p;e(r)?s(r.apply(i,u||[])):h(n,u)}catch(e){h(!1,[e])}};return null!=n?o(d):a.push(d),h},r&&(c=r(c)),c}})}).call(t,s(11).setImmediate,s(6))},function(e,t){function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===s||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function i(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function n(){g&&f&&(g=!1,f.length?l=f.concat(l):y=-1,l.length&&u())}function u(){if(!g){var e=o(n);g=!0;for(var t=l.length;t;){for(f=l,l=[];++y<t;)f&&f[y].run();y=-1,t=l.length}f=null,g=!1,i(e)}}function a(e,t){this.fun=e,this.array=t}function c(){}var p,h,d=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:s}catch(e){p=s}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var f,l=[],g=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new a(e,t)),1!==l.length||g||o(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,s){"use strict";function r(e){var t,s=e.split(".");return!(s.length<=1)&&(t=window.atob(s[1]),t=JSON.parse(t))}e.exports.isExpired=function(e){var t,s,o,i;return t=r(e),o=!0,t?(s=t.exp,i=new Date,i=i.getTime()/1e3,s?(i<s&&(o=!1),o):o):o}},function(e,t,s){"use strict";function r(){this.pending=[],this.activeRequests=0,this.currentSetRequests=0,this.lastRequestSetStart=null,this.resetTimer=null,this._sendNextRequest=this.sendNextRequest.bind(this),this._resetCurrentSet=this.resetCurrentSet.bind(this)}r.prototype.setMaxRequests=function(e){this.maxRequests=e},r.prototype.resetCurrentSet=function(e){this.currentSetRequests=0,this.lastRequestSetStart=e},r.prototype.addRequest=function(e){if(this.activeRequests>=this.maxRequests)return void this.pending.push(e);this.sendRequest(e[0],e[1])},r.prototype.sendRequest=function(e,t){this.resetTimer&&clearTimeout(this.resetTimer),this.currentSetRequests%this.maxRequests==0&&this.resetCurrentSet(Date.now()),this.activeRequests++,this.currentSetRequests++,t?e.send(t):e.send()},r.prototype.sendNextRequest=function(e){var t,s,r,o;return this.activeRequests--,0===this.pending.length?(this.resetTimer||0!==this.activeRequests||(this.resetTimer=setTimeout(this._resetCurrentSet,1e3*this.XRatelimitLimit)),e):(this.XRatelimitReset||(this.XRatelimitReset=e.headers("X-Ratelimit-Reset"),this.XRatelimitLimit=e.headers("X-Ratelimit-Limit"),this.XRatelimitLimit<this.maxRequests&&(this.maxRequests=this.XRatelimitLimit)),r=this.pending.shift(),t=e.headers("X-Ratelimit-Remaining"),s=this.activeRequests<this.maxRequests&&t>0,s?this.sendRequest(r[0],r[1]):(o=Date.now()-this.lastRequestSetStart<100?100:Date.now()-this.lastRequestSetStart,setTimeout(this.sendRequest.bind(this,r[0],r[1]),o)),e)},e.exports=new r},function(e,t,s){"use strict";function r(e){e=u(!0,{},{thumbnail:"/<%=resource%>/<%=id%>/thumbnail",thumbnails:"/<%=resource%>/<%=id%>/thumbnails",deleteThumbnail:"/<%=resource%>/<%=id%>/thumbnail/<%=thumbnailId%>"},e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.getThumbnails=function(e){var t,s;return"string"!=typeof e?n.promisify(!1,"IngestSDK PlaybackContent getThumbnails requires an id to be passed as a string."):(t=n.parseTokens(this.config.host+this.config.thumbnails,{resource:this.config.resource,id:e}),s=new i({url:t,token:this._tokenSource()}),s.send())},r.prototype.addExternalThumbnails=function(e,t){var s,r,o=[];return"string"!=typeof e?n.promisify(!1,"IngestSDK PlaybackContent addExternal requires an id to be passed as a string."):Array.isArray(t)||"string"==typeof t?(Array.isArray(t)?o=t:o.push(t),s=n.parseTokens(this.config.host+this.config.thumbnails,{resource:this.config.resource,id:e}),r=new i({method:"POST",url:s,token:this._tokenSource(),data:o}),r.send()):n.promisify(!1,"IngestSDK PlaybackContent addExternal requires images as a string or an array of strings.")},r.prototype.uploadThumbnail=function(e,t){var s,r,o;return"string"!=typeof e?n.promisify(!1,"IngestSDK PlaybackContent uploadThumbnail requires an id to be passed as a string."):t&&t instanceof File&&n.isImage(t)?(r=n.parseTokens(this.config.host+this.config.thumbnail,{resource:this.config.resource,id:e}),o=new FormData,o.append("image",t),s=new i({method:"POST",url:r,token:this._tokenSource(),data:o}),s.send()):n.promisify(!1,"IngestSDK PlaybackContent uploadThumbnail requires a valid image.")},r.prototype.deleteThumbnail=function(e,t){var s,r;return"string"!=typeof e?n.promisify(!1,"IngestSDK PlaybackContent deleteThumbnail requires an id to be passed as a string."):"string"!=typeof t?n.promisify(!1,"IngestSDK PlaybackContent deleteThumbanil requires a thumbnailId to be passed as a string."):(r=n.parseTokens(this.config.host+this.config.deleteThumbnail,{resource:this.config.resource,id:e,thumbnailId:t}),s=new i({method:"DELETE",url:r,token:this._tokenSource()}),s.send())},e.exports=r},function(e,t,s){"use strict";function r(e){var t;this.defaults={maxRequests:6,host:"https://api.ingest.io"},this.config=o(!0,{},this.defaults,e),this.token=null,this.config.token&&this.setToken(this.config.token),this.request=i,this.JWTUtils=n,this.utils=u,this.resource=p,this.playbackContent=h,this.usersResource=d,this.networksResource=f,this.videosResource=l,this.jobsResource=g,this.profilesResource=y,this.inputsResource=m,this.uploader=a,this.eventsResource=k,this.rolesResource=v,this.livestreamsResource=b,this.requestManager=c,this.setMaxRequests(this.config.maxRequests),t={host:this.config.host,tokenSource:this.getToken.bind(this)},this.videos=new l(t),this.inputs=new m(t),this.users=new d(t),this.networks=new f(t),this.profiles=new y(t),this.jobs=new g(t),this.events=new k(t),this.roles=new v(t),this.livestreams=new b(t)}var o=s(0),i=s(1),n=s(7),u=s(2),a=s(14),c=s(8),p=s(3),h=s(9),d=s(15),f=s(16),l=s(17),g=s(18),y=s(19),m=s(20),k=s(21),v=s(22),b=s(23);r.prototype.setToken=function(e){if("string"!=typeof e)throw new Error("IngestSDK requires an authentication token passed as a string.");this.token=e},r.prototype.setMaxRequests=function(e){if("number"!=typeof e||e<1)throw new Error("IngestSDK requires a maxRequest count to be passed as a positive number.");c.setMaxRequests(e)},r.prototype.getToken=function(){return this.token},r.prototype.upload=function(e){return new a({file:e,api:this,host:this.config.host})},e.exports=r},function(e,t,s){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},s(12),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,s){(function(e,t){!function(e,s){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),s=0;s<t.length;s++)t[s]=arguments[s+1];var r={callback:e,args:t};return c[a]=r,u(a),a++}function o(e){delete c[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(s,r)}}function n(e){if(p)setTimeout(n,0,e);else{var t=c[e];if(t){p=!0;try{i(t)}finally{o(e),p=!1}}}}if(!e.setImmediate){var u,a=1,c={},p=!1,h=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){u=function(e){t.nextTick(function(){n(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,s=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=s,t}}()?function(){var t="setImmediate$"+Math.random()+"$",s=function(s){s.source===e&&"string"==typeof s.data&&0===s.data.indexOf(t)&&n(+s.data.slice(t.length))};e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),u=function(s){e.postMessage(t+s,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){n(e.data)},u=function(t){e.port2.postMessage(t)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var e=h.documentElement;u=function(t){var s=h.createElement("script");s.onreadystatechange=function(){n(t),s.onreadystatechange=null,e.removeChild(s),s=null},e.appendChild(s)}}():function(){u=function(e){setTimeout(n,0,e)}}(),d.setImmediate=r,d.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,s(13),s(6))},function(e,t){var s;s=function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(s=window)}e.exports=s},function(e,t,s){"use strict";function r(e){this.defaults={api:null,file:null,upload:"/encoding/inputs/<%=id%>/upload<%=method%>",sign:"/encoding/inputs/<%=id%>/upload/sign<%=method%>",uploadComplete:"/encoding/inputs/<%=id%>/upload/complete",uploadAbort:"/encoding/inputs/<%=id%>/upload/abort<%=method%>",uploadMethods:{param:"?type=",singlePart:"amazon",multiPart:"amazonMP"}},this.config=o(!0,{},this.defaults,e),this.api=this.config.api,this.file=this.config.file,this.chunks=[],this.chunkSize=0,this.chunkCount=0,this.chunksComplete=0,this.uploadedBytes=0,this.aborted=!1,this.paused=!1,this.created=!1,this.initialized=!1,this.uploadComplete=!1,this.fileRecord={filename:this.file.name,type:this.file.type,size:this.file.size,method:this._checkMultipart(this.file),contentType:"application/octet-stream"}}var o=s(0),i=s(1),n=s(5),u=s(2);r.prototype.progress=function(e){this.config.progress=e.bind(this)},r.prototype.save=function(){return this._create(this.fileRecord).then(this._initialize.bind(this)).then(this._prepareUpload.bind(this))},r.prototype._updateProgress=function(e,t){this.config.progress&&this.config.progress.call(this,e,t)},r.prototype._create=function(e){return this.created?u.promisify(!0,this.fileRecord.id):this.aborted?u.promisify(!1,"upload aborted"):this.api.inputs.add(e).then(this._createSuccess.bind(this))},r.prototype._createSuccess=function(e){return this.created=!0,this._updateProgress(0,0),this.input=e.data,this.fileRecord.id=e.data.id,this.fileRecord.id},r.prototype._initialize=function(){var e,t,s,r="";return this.aborted?u.promisify(!1,"upload aborted"):(this.fileRecord.method||(r=this.config.uploadMethods.param+this.config.uploadMethods.singlePart),t={id:this.fileRecord.id,method:r},e=u.parseTokens(this.api.config.host+this.config.upload,t),s=new i({url:e,token:this.api.getToken(),method:"POST",data:this.fileRecord}),s.send().then(this._initializeComplete.bind(this)))},r.prototype._initializeComplete=function(e){this.initialized=!0,this.fileRecord.key=e.data.key,this.fileRecord.uploadId=e.data.uploadId,this.chunkSize=e.data.pieceSize,this.chunkCount=e.data.pieceCount},r.prototype._prepareUpload=function(){return this.fileRecord.method?this._createChunks().then(this._completeUpload.bind(this)):this._uploadFile().then(this._onCompleteUpload.bind(this))},r.prototype._createChunks=function(){var e,t,s,r,o,i=this._getSliceMethod(this.file),n=[];if(this.aborted)return this.abort(),u.promisify(!1,"upload aborted");for(e=0;e<this.chunkCount;e++)r=e*this.chunkSize,o=Math.min((e+1)*this.chunkSize,this.fileRecord.size),t=this.file[i](r,o),s={partNumber:e+1,data:t},this.chunks.push(s),n.push(this._uploadChunk.bind(this,s));return this.multiPartPromise=u.series(n,this.paused),this.multiPartPromise},r.prototype._uploadChunk=function(e){var t=n();return this._signUpload(e).then(this._sendUpload.bind(this,e)).then(this._completeChunk.bind(this,e,t)),t},r.prototype._uploadFile=function(){var e={data:this.file};return this.singlePartPromise||(this.singlePartPromise=n()),this._signUpload(e).then(this._sendUpload.bind(this,e)).then(this._sendSinglepartComplete.bind(this)).then(this._updateProgress.bind(this,100,this.fileRecord.size)).then(this._uploadFileComplete.bind(this)),this.singlePartPromise},r.prototype._uploadFileComplete=function(){this.singlePartPromise(!0,[])},r.prototype._signUpload=function(e){var t,s,r="",o={};return e.partNumber&&(this.fileRecord.partNumber=e.partNumber),o["Content-Type"]="multipart/form-data",this.fileRecord.method||(r=this.config.uploadMethods.param+this.config.uploadMethods.singlePart),t=u.parseTokens(this.api.config.host+this.config.sign,{id:this.fileRecord.id,method:r}),s=new i({url:t,token:this.api.getToken(),method:"POST",headers:o,data:this.fileRecord}),s.send()},r.prototype._sendUpload=function(e,t){var s,r={};return r["Content-Type"]=this.fileRecord.contentType,r.authorization=t.data.authHeader,r["x-amz-date"]=t.data.dateHeader,r["x-amz-security-token"]=t.data.securityToken,s=new i({url:t.data.url,method:"PUT",headers:r,data:e.data,ignoreAcceptHeader:!0,requestProgress:this._requestProgress.bind(this)}),this.requestPromise=s,s.send()},r.prototype._requestProgress=function(e,t){var s;s=(this.uploadedBytes+e)/this.fileRecord.size,s*=99,s=Math.round(s),this._updateProgress(s,t)},r.prototype._sendSinglepartComplete=function(){this.uploadComplete=!0,this.uploadedBytes=this.fileRecord.size},r.prototype._completeChunk=function(e,t){this.chunksComplete++,e.complete=!0,this.uploadedBytes+=e.data.size,this.chunksComplete===this.chunkCount&&(this.uploadComplete=!0),t(!0,[])},r.prototype._completeUpload=function(){var e,t,s;return this.aborted?u.promisify(!1,"Upload Aborted."):(t={id:this.fileRecord.id},e=u.parseTokens(this.api.config.host+this.config.uploadComplete,t),s=new i({url:e,token:this.api.getToken(),method:"POST",data:this.fileRecord}),s.send().then(this._onCompleteUpload.bind(this)))},r.prototype._onCompleteUpload=function(){return this._updateProgress(100),this.uploadComplete=!0,this.multiPartPromise=null,this.requestPromise=null,this.singlePartPromise=null,this.fileRecord.id},r.prototype.abort=function(){var e,t,s;return this.aborted=!0,this.initialized?(this.requestPromise&&(this.requestPromise.cancel(),this.requestPromise=null),this.singlePartPromise?(this.singlePartPromise=null,this._abortComplete()):(this.multiPartPromise&&(this.multiPartPromise.cancel(),this.multiPartPromise=null),t={id:this.fileRecord.id,method:""},e=u.parseTokens(this.api.config.host+this.config.uploadAbort,t),s=new i({url:e,token:this.api.getToken(),method:"POST",data:this.fileRecord}),s.send().then(this._abortComplete.bind(this)))):this.created?this.api.inputs.delete(this.fileRecord.id):u.promisify(!0)},r.prototype.abortSync=function(e){var t,s,r;return this.aborted=!0,this.initialized?(this.requestPromise&&(this.requestPromise.cancel(),this.requestPromise=null),this.singlePartPromise?(this.singlePartPromise=null,void this.api.inputs.deleteSync(this.fileRecord.id,e)):(this.multiPartPromise&&(this.multiPartPromise.cancel(),this.multiPartPromise=null),s={id:this.fileRecord.id,method:""},t=u.parseTokens(this.api.config.host+this.config.uploadAbort,s),r=new i({url:t,async:!1,token:this.api.getToken(),method:"POST",data:this.fileRecord}),void r.sendSync(this.abortSyncComplete.bind(this,e)))):this.created?void this.api.inputs.deleteSync(this.fileRecord.id,e):void e(null)},r.prototype.abortSyncComplete=function(e,t){if(t){if("function"!=typeof e)throw t;e(t)}else this.api.inputs.deleteSync(this.fileRecord.id,e)},r.prototype._abortComplete=function(){return this.api.inputs.delete(this.fileRecord.id)},r.prototype.pause=function(){this.uploadComplete||(this.paused=!0,this.multiPartPromise&&this.multiPartPromise.pause(),this.requestPromise&&this.requestPromise.cancel())},r.prototype.resume=function(){this.paused=!1,this.multiPartPromise?this.multiPartPromise.resume():this.requestPromise&&this._uploadFile()},r.prototype._checkMultipart=function(e){if(!e)throw new Error("Upload::_checkMultipart - A file object is required.");return e.size>5242880},r.prototype._getSliceMethod=function(e){return"mozSlice"in e?"mozSlice":"webkitSlice"in e?"webkitSlice":"slice"},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.USERS,currentUser:"/users/me",transfer:"/users/<%=oldId%>/transfer/<%=newId%>",updateRoles:"/users/<%=id%>/roles",revoke:"/revoke"};e=u(!0,{},t,e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.getCurrentUserInfo=function(){return new i({url:this.config.host+this.config.currentUser,token:this._tokenSource()}).send()},r.prototype.transferUserAuthorship=function(e,t){var s,r,o;return"string"!=typeof e?n.promisify(!1,"IngestSDK transferUserAuthorship requires `oldId` to be passed as a string."):"string"!=typeof t?n.promisify(!1,"IngestSDK transferUserAuthorship requires `newId` to be passed as a string"):(s={oldId:e,newId:t},r=n.parseTokens(this.config.host+this.config.transfer,s),o=new i({url:r,token:this._tokenSource(),method:"PATCH"}),o.send())},r.prototype.revokeCurrentUser=function(){return new i({url:this.config.host+this.config.currentUser+this.config.revoke,token:this._tokenSource(),method:"DELETE"}).send()},r.prototype.updateUserRoles=function(e,t){var s,r,o;return!Array.isArray(t)||t.length<1?n.promisify(!1,"IngestSDK updateUserRoles requires `roleIDs` to be passed as an array."):"string"!=typeof e?n.promisify(!1,"IngestSDK updateUserRoles requires `id` to be passed as a string."):(r=n.parseTokens(this.config.host+this.config.updateRoles,{id:e}),o={role_ids:t},s=new i({url:r,token:this._tokenSource(),method:"PUT",data:o}),s.send())},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.NETWORKS,keys:"/<%=resource%>/<%=networkId%>/keys",keysById:"/<%=resource%>/<%=networkId%>/keys/<%=keyId%>",invite:"/<%=resource%>/<%=networkId%>/invite",invoices:"/<%=resource%>/<%=networkId%>/invoices",invoicesById:"/<%=resource%>/<%=networkId%>/invoices/<%=invoiceId%>",currentUsage:"/<%=resource%>/<%=networkId%>/invoices?currentUsage=true",customers:"/<%=resource%>/<%=networkId%>/customers",customerById:"/<%=resource%>/<%=networkId%>/customers/<%=cusId%>",customerCardInformation:"/<%=resource%>/<%=networkId%>/customers/<%=cusId%>/card",getPendingUsers:"/<%=resource%>/<%=networkId%>?filter=pending",deletePendingUser:"/<%=resource%>/<%=networkId%>/pending-users/<%=pendingUserId%>"};e=u(!0,{},t,e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.linkUser=function(e,t){var s,r,o;return"string"!=typeof e?n.promisify(!1,"IngestSDK linkUser requires `networkId` to be passed as a string."):"string"!=typeof t?n.promisify(!1,"IngestSDK linkUser requires `userId` to be passed as a string."):(s={id:t},o=n.parseTokens(this.config.host+this.config.byId,{resource:this.config.resource,id:e}),r=new i({url:o,data:s,token:this._tokenSource(),method:"LINK"}),r.send())},r.prototype.unlinkUser=function(e,t){var s,r,o;return"string"!=typeof e?n.promisify(!1,"IngestSDK unlinkUser requires `networkId` to be passed as a string."):"string"!=typeof t?n.promisify(!1,"IngestSDK unlinkUser requires `userId` to be passed as a string."):(s={id:t},o=n.parseTokens(this.config.host+this.config.byId,{resource:this.config.resource,id:e}),r=new i({url:o,data:s,token:this._tokenSource(),method:"UNLINK"}),r.send())},r.prototype.inviteUser=function(e,t,s,r){var o,u,a;return"string"!=typeof e?n.promisify(!1,"IngestSDK inviteUser requires `networkId` to be passed as a string."):"string"!=typeof t?n.promisify(!1,"IngestSDK inviteUser requires `email` to be passed as a string."):"string"!=typeof s?n.promisify(!1,"IngestSDK inviteUser requires `name` to be passed as a string."):(o={email:t,name:s},"boolean"==typeof r&&(o.resend=r),a=n.parseTokens(this.config.host+this.config.invite,{resource:this.config.resource,networkId:e}),u=new i({url:a,data:o,token:this._tokenSource(),method:"POST"}),u.send())},r.prototype.getSecureKeys=function(e){var t,s;return"string"!=typeof e?n.promisify(!1,"IngestSDK getSecureKeys requires `networkId` to be passed as a string."):(s=n.parseTokens(this.config.host+this.config.keys,{resource:this.config.resource,networkId:e}),t=new i({url:s,token:this._tokenSource()}),t.send())},r.prototype.addSecureKey=function(e,t){var s,r;return"string"!=typeof e?n.promisify(!1,"IngestSDK addSecureKey requires `networkId` to be passed as a string."):"object"!=typeof t?n.promisify(!1,"IngestSDK addSecureKey requires `data` to be passed as an object."):"string"!=typeof t.key?n.promisify(!1,"IngestSDK addSecureKey requires that the key be a string in RSA public key format."):("string"!=typeof t.title&&(t.title=""),r=n.parseTokens(this.config.host+this.config.keys,{resource:this.config.resource,networkId:e}),s=new i({url:r,token:this._tokenSource(),method:"POST",data:t}),s.send())},r.prototype.getSecureKeyById=function(e,t){var s,r;return"string"!=typeof e?n.promisify(!1,"IngestSDK getSecureKeyById requires a `networkId` to be passed as a string."):"string"!=typeof t?n.promisify(!1,"IngestSDK getSecureKeyById requires a `keyId` to be passed as a string."):(s=n.parseTokens(this.config.host+this.config.keysById,{resource:this.config.resource,networkId:e,keyId:t}),r=new i({url:s,token:this._tokenSource()}),r.send())},r.prototype.updateSecureKey=function(e,t){var s,r;return"string"!=typeof e?n.promisify(!1,"IngestSDK updateSecureKeyById requires `networkId` to be passed as a string."):"object"!=typeof t?n.promisify(!1,"IngestSDK updateSecureKeyById requires `data` to be passed as an object."):"string"!=typeof t.id?n.promisify(!1,"IngestSDK updateSecureKeyById requires param `data.id` to be a string."):("string"!=typeof t.title&&(t.title=""),s=n.parseTokens(this.config.host+this.config.keysById,{resource:this.config.resource,networkId:e,keyId:t.id}),r=new i({url:s,token:this._tokenSource(),method:"PATCH",data:t}),r.send())},r.prototype.deleteSecureKey=function(e,t){var s,r;return"string"!=typeof e?n.promisify(!1,"IngestSDK deleteSecureKeyById requires a `networkId` to be passed as a string."):"string"!=typeof t?n.promisify(!1,"IngestSDK deleteSecureKeyById requires a `keyId` to be passed as a string."):(s=n.parseTokens(this.config.host+this.config.keysById,{resource:this.config.resource,networkId:e,keyId:t}),r=new i({url:s,token:this._tokenSource(),method:"DELETE"}),r.send())},r.prototype.createCustomer=function(e,t){var s,r,o;return"string"!=typeof e||"string"!=typeof t?n.promisify(!1,"IngestSDK Networks createCustomer requires stripeToken and networkId to be strings."):(s=n.parseTokens(this.config.host+this.config.customers,{networkId:t,resource:this.config.resource}),o={stripeToken:e},r=new i({url:s,data:o,token:this._tokenSource(),method:"POST"}),r.send())},r.prototype.updateCustomer=function(e,t,s,r){var o,u,a;return"string"!=typeof e||"string"!=typeof t?n.promisify(!1,"IngestSDK Networks updateCustomer requires `networkId` and `cusID` to be a string."):"string"!=typeof s&&"string"!=typeof r?n.promisify(!1,"IngestSDK Networks updateCustomer requires either networkName or stripeToken passed as a string."):(o=n.parseTokens(this.config.host+this.config.customerById,{resource:this.config.resource,networkId:e,cusId:t}),a={networkName:s,stripeToken:r},u=new i({url:o,data:a,token:this._tokenSource(),method:"PATCH"}),u.send())},r.prototype.deleteCustomer=function(e,t){var s,r;return"string"!=typeof e||"string"!=typeof t?n.promisify(!1,"IngestSDK Networks deleteCustomer requires `networkId` and `cusId` to be strings."):(s=n.parseTokens(this.config.host+this.config.customerById,{resource:this.config.resource,networkId:e,cusId:t}),r=new i({url:s,token:this._tokenSource(),method:"DELETE"}),r.send())},r.prototype.getCustomerCardInformation=function(e,t){var s,r;return"string"!=typeof t||"string"!=typeof e?n.promisify(!1,"IngestSDK Networks getCustomerCardInformation requires networkId and customerId to be strings"):(s=n.parseTokens(this.config.host+this.config.customerCardInformation,{resource:this.config.resource,networkId:e,cusId:t}),r=new i({url:s,token:this._tokenSource()}),r.send())},r.prototype.deleteCustomerCard=function(e,t){var s,r;return"string"!=typeof t||"string"!=typeof e?n.promisify(!1,"IngestSDK Networks deleteCustomerCard requires networkId and customerId to be strings"):(s=n.parseTokens(this.config.host+this.config.customerCardInformation,{resource:this.config.resource,networkId:e,cusId:t}),r=new i({url:s,token:this._tokenSource(),method:"DELETE"}),r.send())},r.prototype.getInvoices=function(e){var t,s;return"string"!=typeof e?n.promisify(!1,"IngestSDK Networks getInvoices requires networkId to be a string"):(t=n.parseTokens(this.config.host+this.config.invoices,{resource:this.config.resource,networkId:e}),s=new i({url:t,token:this._tokenSource()}),s.send())},r.prototype.getInvoiceById=function(e,t){var s,r;return"string"!=typeof e?n.promisify(!1,"IngestSDK getInvoiceById requires networkId to be passed as a string."):"string"!=typeof t?n.promisify(!1,"IngestSDK getInvoiceById requires invoiceId to be passed as a string."):(s=n.parseTokens(this.config.host+this.config.invoicesById,{resource:this.config.resource,networkId:e,invoiceId:t}),r=new i({url:s,token:this._tokenSource()}),r.send())},r.prototype.getCurrentUsage=function(e){var t,s;return"string"!=typeof e?n.promisify(!1,"IngestSDK getCurrentUsage requires networkId to be passed as a string."):(t=n.parseTokens(this.config.host+this.config.currentUsage,{resource:this.config.resource,networkId:e}),s=new i({url:t,token:this._tokenSource()}),s.send())},r.prototype.getPendingUsers=function(e){var t,s;return"string"!=typeof e?n.promisify(!1,"IngestSDK getPendingUsers requires networkId to be passed as a string."):(t=n.parseTokens(this.config.host+this.config.getPendingUsers,{resource:this.config.resource,networkId:e}),s=new i({url:t,token:this._tokenSource()}),s.send())},r.prototype.deletePendingUser=function(e,t){var s,r;return"string"!=typeof e||"string"!=typeof t?n.promisify(!1,"IngestSDK deletePendingUser requires networkId and pendingUserId to be passed as strings."):(s=n.parseTokens(this.config.host+this.config.deletePendingUser,{resource:this.config.resource,networkId:e,pendingUserId:t}),r=new i({method:"DELETE",url:s,token:this._tokenSource()}),r.send())},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.VIDEOS,variants:"/<%=resource%>/<%=id%>/variants",publish:"/<%=resource%>/publish"};e=u(!0,{},t,e),o.call(this,e)}var o=s(9),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.getAll=function(e,t){var s,r=n.parseTokens(this.config.host+this.config.all,{resource:this.config.resource});if(t){if("string"!=typeof t)return n.promisify(!1,"IngestSDK Videos.getAll requires a valid status to be passed as a string.");r=r+"?status="+t}return s=new i({url:r,token:this._tokenSource(),headers:e}),s.send()},r.prototype.getVariants=function(e){var t,s;return"string"!=typeof e?n.promisify(!1,"IngestSDK Resource getVariants requires a valid video id passed as a string."):(t=n.parseTokens(this.config.host+this.config.variants,{resource:this.config.resource,id:e}),s=new i({url:t,token:this._tokenSource()}),s.send())},r.prototype.publish=function(e){var t,s;return Array.isArray(e)&&0!==e.length?(s=n.parseTokens(this.config.host+this.config.publish,{resource:this.config.resource}),t=new i({url:s,token:this._tokenSource(),method:"POST",data:e}),t.send()):n.promisify(!1,"IngestSDK Videos publish requires an array of ids to be passed in.")},r.prototype.count=function(e,t){var s,r,o;if(o=!1,r=n.parseTokens(this.config.host+this.config.all,{resource:this.config.resource}),e){if("string"!=typeof e)return n.promisify(!1,"IngestSDK Videos count requires a valid status to be passed as a string.");r+="?status="+e,o=!0}return!0===t&&(r+=o?"&":"?",r+="private=true"),s=new i({url:r,token:this._tokenSource(),method:"HEAD"}),s.send().then(this._handleCountResponse)},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.JOBS,progress:"/<%=resource%>/<%=id%>/progress"};e=u(!0,{},t,e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.add=function(e){var t,s;return"object"!=typeof e?n.promisify(!1,"IngestSDK Jobs `add` requires a resource passed as an object."):(t=n.parseTokens(this.config.host+this.config.all,{resource:this.config.resource}),s=new i({url:t,token:this._tokenSource(),method:"POST",data:e}),s.send())},r.prototype.progress=function(e){var t,s;return"string"!=typeof e?n.promisify(!1,"IngestSDK Jobs `progress` requires `jobId` to be passed as a string."):(t=n.parseTokens(this.config.host+this.config.progress,{resource:this.config.resource,id:e}),s=new i({url:t,token:this._tokenSource(),method:"GET"}),s.send())},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.PROFILES};e=u(!0,{},t,e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.update=function(e){var t,s,r;return"object"!=typeof e?n.promisify(!1,"IngestSDK Profiles update requires a resource to be passed as an object."):(s=e,r=n.parseTokens(this.config.host+this.config.byId,{resource:this.config.resource,id:e.id}),t=new i({url:r,token:this._tokenSource(),method:"PUT",data:s}),t.send())},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.INPUTS,allWithFilters:"/<%=resource%>?filter=<%=filterChain%>",searchWithFilters:"/<%=resource%>?search=<%=input%>&filter=<%=filterChain%>"};e=u(!0,{},t,e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.getAll=function(e,t){var s,r,o,u;return u={resource:this.config.resource},o=this.config.host+this.config.all,Array.isArray(t)&&t.length>0&&(u.filterChain=t.join(","),o=this.config.host+this.config.allWithFilters),r=n.parseTokens(o,u),s=new i({url:r,token:this._tokenSource(),headers:e}),s.send()},r.prototype.search=function(e,t,s){var r,o,u,a;return"string"!=typeof e?n.promisify(!1,"IngestSDK Inputs search requires search input to be passed as a string."):(a={resource:this.config.resource,input:encodeURIComponent(e)},u=this.config.host+this.config.search,Array.isArray(s)&&s.length>0&&(a.filterChain=s.join(","),u=this.config.host+this.config.searchWithFilters),r=n.parseTokens(u,a),o=new i({url:r,token:this._tokenSource(),headers:t}),o.send())},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.EVENTS,types:"/<%=resource%>/types"};e=u(!0,{},t,e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.getAll=function(e,t,s){var r,o,u;if(u="",o=n.parseTokens(this.config.host+this.config.all,{resource:this.config.resource}),t){if("string"!=typeof t)return n.promisify(!1,"IngestSDK Events.getAll requires a valid filter status to be passed as a string.");u="?filter="+t}if(s){if("string"!=typeof s)return n.promisify(!1,"IngestSDK Events.getAll requires a valid filter type to be passed as a string.");u=u?u+"&resource="+s:"?resource="+s}return o+=u,r=new i({url:o,token:this._tokenSource(),headers:e}),r.send()},r.prototype.getTypes=function(){var e,t;return e=n.parseTokens(this.config.host+this.config.types,{resource:this.config.resource}),t=new i({url:e,token:this._tokenSource()}),t.send()},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.ROLES};e=u(!0,{},t,e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.update=function(e){var t,s,r;return"object"!=typeof e?n.promisify(!1,"IngestSDK Roles update requires a role to be passed as an object."):(s=e,r=n.parseTokens(this.config.host+this.config.byId,{resource:this.config.resource,id:e.id}),t=new i({url:r,token:this._tokenSource(),method:"PUT",data:s}),t.send())},e.exports=r},function(e,t,s){"use strict";function r(e){var t={resource:a.LIVESTREAMS,status:"/<%=resource%>/<%=id%>/status",end:"/<%=resource%>/<%=id%>/stop"};e=u(!0,{},t,e),o.call(this,e)}var o=s(3),i=s(1),n=s(2),u=s(0),a=s(4);r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.getAll=function(e,t){var s,r=n.parseTokens(this.config.host+this.config.all,{resource:this.config.resource});if(t){if("string"!=typeof t)return n.promisify(!1,"IngestSDK Livestreams.getAll requires a valid status to be passed as a string.");r=r+"?status="+t}return s=new i({url:r,token:this._tokenSource(),headers:e}),s.send()},r.prototype.getStatus=function(e){var t,s;return"string"!=typeof e?n.promisify(!1,"IngestSDK Livestream.getStatus requires a valid id passed as a string."):(t=n.parseTokens(this.config.host+this.config.status,{resource:this.config.resource,id:e}),s=new i({url:t,token:this._tokenSource()}),s.send())},r.prototype.end=function(e,t){var s,r,o;return"string"!=typeof e||"string"!=typeof t?n.promisify(!1,"IngestSDK Livestream.end requires a valid id and stream key passed as a string."):(r=n.parseTokens(this.config.host+this.config.end,{resource:this.config.resource,id:e}),o={stream_key:t},s=new i({url:r,token:this._tokenSource(),method:"POST",data:o}),s.send())},e.exports=r}])});
//# sourceMappingURL=ingest-sdk.js.map